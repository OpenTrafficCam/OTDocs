# Traffic Counts

One of the main goals of OpenTrafficCam are automatic traffic counts at road sections and intersections.
However, the results of such counts are only suitable for mobility planning if they are of high quality.
In the worst case, traffic facilities planned based on inaccurate count data can waste public resources and even endanger the health of their users.

Precision and Recall, which are used to evaluate machine learning algorithms, can similarly be used as meaningful metrics to evaluate the quality of automated traffic counts.
The precision metric describes the ratio of vehicles counted correctly by OpenTrafficCam to all vehicles counted by OpenTrafficCam (including incorrect ones).
On the other hand, the recall metric describes the ratio of vehicles correctly counted by OpenTrafficCam to all vehicles passed in reality (including those not counted by OpenTrafficCam).

In his diploma thesis OpenTrafficCam contributor Armin Kollascheck investigated the quality of counting motorized traffic that got generated by OpenTrafficCam using YOLOv5x6 (Ultralytics), and a modified version of the IOU-Tracker (Bochinski et al.) for the following eight realistic traffic scenarios.
The results are shown in the table below (sample size: each 200 cars passing by in reality).

<!-- TODO: #65 Add table with images of the traffic scenarios  -->

| Traffic facility          |          Lighting           | Camera angle | Precision | Recall |
| ------------------------- | :-------------------------: | :----------: | :-------: | :----: |
| Four-way intersection (1) |             Day             |    Steep     |   1.00    |  0.94  |
| Four-way intersection (2) |             Day             |    Steep     |   0.99    |  0.95  |
| Four-way intersection (2) |  Night with street lights   |    Steep     |   0.98    |  0.95  |
| Three-way intersection    |             Day             |    Steep     |   0.95    |  0.85  |
| Four-way roundabout       |             Day             |     Flat     |   0.63    |  0.56  |
| Route section (1)         |             Day             |    Steep     |   1.00    |  0.91  |
| Route section (2)         |             Day             |    Steep     |   1.00    |  0.97  |
| Route section (2)         | Night without street lights |    Steep     |   0.06    |  0.12  |

The high values for precision and recall in many scenarios show that OpenTrafficCam already works quite well with the official YOLOv5x6 model and a rather simple tracker.
Thus, on different traffic facilities, counting qualities were achieved that probably exceed those of manual on-site counts.
And even video recordings at night with street-side lighting seem to be no problem for OpenTrafficCam.

Unsatisfactory results, however, occurred with comparatively flat camera angles or night recordings without street lighting.
This shows that the current pipeline is not yet perfect.
We aim to further improve OpenTrafficCam to achieve satisfying counting results even under very difficult circumstances.
